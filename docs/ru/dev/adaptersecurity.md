---
translatedFrom: en
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/dev/adaptersecurity.md
title: Функции безопасности для разработчиков адаптеров
hash: /NdARX0dTYJRe5UAHsq6Xdl6DY1zMplYgcLpB1LOemU=
---
# Функции безопасности для разработчиков адаптеров
## Запретить доступ других адаптеров к конфиденциальным данным
Если вам нужно сохранить пароль пользователя или токен, который дает пользователям доступ к предоставляемой вами услуге, то, возможно, в интересах пользователя, чтобы сторонние адаптеры не могли получить доступ к этой информации.
Для этого вы можете добавить поле `protectedNative` в свой файл `io-package.json`. Это поле должно содержать массив всех атрибутов, которые хранятся в атрибуте `native` адаптера, который будет защищен.

Обратите внимание, что адаптер администратора всегда будет иметь доступ к защищенным атрибутам, чтобы дать пользователям возможность читать атрибуты на собственной странице конфигурации адаптера и редактировать защищенные поля в `system.adapter.<namepsace>.<instance>` вручную.

__Пример__:

```json
...
"protectedNative": [
    "password"
],
"native": {
  "password": "topSecret"
}
...
```

## Автоматически шифровать и дешифровать конфиденциальные данные
Если вам нужно сохранить пароль пользователя или токен, который дает пользователям доступ к предоставляемой вами услуге, может быть в интересах пользователя, чтобы эта конфиденциальная информация не хранилась в открытом виде.
Для этого вы можете добавить поле `encryptedNative` в свой файл `io-package.json`. Это поле должно содержать массив всех атрибутов, которые хранятся в атрибуте `native` адаптера, который будет храниться в зашифрованном виде и автоматически расшифровываться во время выполнения адаптера.

Когда текущий алгоритм шифрования становится небезопасным, он будет изменен в js-контроллере.

__Алгоритм шифрования, используемый в настоящее время__

- js-controller> = 3.0: `по умолчанию`
- js-controller> = 3.2: `aes-192-cbc`

Обратите внимание, что для этой функции требуется как минимум js-controller 3.0.0.

__Пример__:

```json
...
"encryptedNative": [
    "password"
],
"native": {
  "password": "topSecret"
}
...
```

## Ручное шифрование и дешифрование конфиденциальных данных
Мы также предоставляем методы адаптера для ручного шифрования данных внутри вашего кода.
Для этого вы можете использовать методы `adapter.encrypt` и `adapter.decrypt`. Ключ, используемый для шифрования и дешифрования, является общесистемным уникальным секретом установки пользователя. Если вы хотите использовать свой собственный ключ (192-битный шестнадцатеричный) для шифрования, вы можете сделать это, передав второй аргумент в методы `encrypt` и `decrypt`.

__Пример__:

```javascript
// encrypt data using users unique secret
const encryptedContent = adapter.encrypt('super secret message');

const decryptedContent = adapter.decrypt(encryptedContent);
// decryptedContent === 'super secret message'

// Or use your own key (24 byte Hex) for encryption
const crypto = require('crypto');
const key = crypto.randomBytes(24).toString('hex');
const encryptedContent = adapter.encrypt(key, 'super secret message');
const decryptedContent = adapter.decrypt(key, encryptedContent);
// decryptedContent === 'super secret message'
```