---
title: публиковать
lastChanged: 21.01.2020
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/dev/adapterpublish.md
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
hash: iLFFwmHGGEvoX1jzWG4/Zs7xSpudVBvxMEzm9P5Qcps=
---
# Опубликовать адаптер
Прежде чем подумать о публикации адаптера, его следует предложить для тестирования в [Тестовая тема форума](https://forum.iobroker.net/category/91/tester).
Если тесты пройдены успешно, а адаптер стабилен, его следует изначально включить в последний репозиторий.

Если адаптер работает стабильно с определенным номером версии, его можно перенести в стабильный репозиторий. Это требует собственной оценки разработчика в сочетании с отзывами пользователей.

*** Дополнительные текущие требования можно найти здесь: *** https://github.com/ioBroker/ioBroker.repositories/blob/master/README.md

## Последние требования к репозиторию
0.Используйте [https://adapter-check.iobroker.in/[(https://adapter-check.iobroker.in/) для тестирования репо адаптера.

1. В хранилище github адаптера в ioBroker должна быть заглавная буква B, а в package.json должна быть строчная буква, поскольку `` npm '' не допускает заглавные буквы.

2. Заголовок в io-package.json не должен содержать слово «ioBroker» или слово «адаптер».

3. Атрибут `` title '' в io-package.json (общий) - это краткое имя адаптера на английском языке. В то время как `` titleLang '' содержит переводы атрибута `` title ''. (расширение Lang обозначает языки)

4. Адаптер должен содержать инструкции в виде файла README.md. По крайней мере, это должно быть доступно на английском языке. Другие языки также приветствуются. Этот [пример] (https://github.com/foxriver76/ioBroker.denon) может служить предложением.

5. Адаптер требует лицензии. И в io-package.json, и в отдельном [file] (https://github.com/foxriver76/ioBroker.denon/blob/master/LICENSE) в репозитории Github.

   Пример для io-package.json:

```json
{
  "common": {
      "license": "MIT"
  }
}
```

6. Каталог `www` и каталог` widget` должны быть удалены, когда они не используются.

7. В io-package.json атрибут `type` должен быть создан в общем. Для этой цели из этого [списка] следует указать наилучшую категорию подгонки (# категорий адаптеров).

8. В io-package.json атрибуты `connectionType` и` dataSource` должны быть созданы в общем. Для этой цели из этого [списка] следует указать наиболее подходящую категорию подключения (# тип подключения адаптера).

9. Состояния, созданные адаптером, должны иметь действительную информацию для их [ролей] (https://github.com/ioBroker/ioBroker/blob/master/doc/STATE_ROLES.md#state-roles) `role` в общем ,

Следует избегать использования роли `state`.

10. Адаптер должен использовать оба теста, указанные в шаблоне. Для этого учетная запись Github может быть связана с Appveyor (тесты Windows) и Travis CI (тесты Linux и Mac OS), а соответствующий репозиторий может быть зарегистрирован для тестирования.

Эти два инструмента непрерывной интеграции доказали свою пригодность для проекта ioBroker и бесплатны для общедоступных репозиториев Github.

Разработчик может с удовольствием расширить сферу тестов.

11. В io-package.json должна быть хотя бы одна запись под общим для атрибута «авторы».

Атрибут `author` также должен быть заполнен в package.json.
При желании несколько авторов также могут быть сохранены для npm, используя атрибут `contributors` в package.json.

12. Адаптер должен быть доступен в виде пакета npm. Дополнительную информацию можно найти [здесь] (https://github.com/ioBroker/ioBroker.repositories#how-to-publish-on-npm).

13. Организация ioBroker должна быть добавлена в npm. Это необходимо для обеспечения долгосрочного обслуживания пакета, даже если разработчик больше не может поддерживать пакет из-за времени или других причин.

Дополнительную информацию можно найти в [здесь](https://github.com/ioBroker/ioBroker.repositories#add-owner-to-packet).

## Требования к стабильному репозиторию
1. Адаптер был успешно добавлен в последний репозиторий
2. Существует [Тестовая ветка форума] (https://forum.iobroker.net/viewforum.php?f=36) для адаптера, в которой уже были предоставлены отзывы пользователей.
3. Должна быть реализована функция обнаружения. Это функция в [Адаптере обнаружения] (https://github.com/ioBroker/ioBroker.discovery),

автоматически распознавать, может ли пользователь использовать экземпляр адаптера.
Для этого необходимо сделать запрос на удаление в хранилище [Адаптеры Discovery](https://github.com/ioBroker/ioBroker.discovery).

## Добавьте адаптер в официальный репозиторий
1. Необходимо посетить [официальный репозиторий Github] (https://github.com/ioBroker/ioBroker.repositories) и сделать запрос на извлечение со следующим содержимым, в зависимости от репозитория.

2. Пожалуйста, расположите адаптер правильно в алфавитном порядке между существующими адаптерами.

3. Номер версии должен быть объявлен при добавлении в стабильный репозиторий. Это необходимо обновить при дальнейшей разработке адаптера.

4. Адаптер должен определить атрибут списка `docs` в io-package.json, указав, где можно найти инструкции на соответствующем языке.

В качестве ключа указывается язык, а в качестве значения указывается путь к файлу уценки.
Требуются инструкции на английском языке (в экстренных случаях можно сослаться на стандарт README). Немецкое руководство также желательно, так как большинство пользователей говорят по-немецки, но это не обязательно.
Подробные инструкции могут сэкономить разработчику много времени на форуме.
Пример можно найти в [здесь](https://github.com/foxriver76/ioBroker.denon/blob/master/docs/de/README.md).

   пример:

```json
{
  "common": {
     "docs": {
         "de": "docs/de/README.md"
     }
  }
}
```

### Последний
Файл `sources-dist.json` необходимо отредактировать:

пример:

```json
  "admin": {
    "meta": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/io-package.json",
    "icon": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/admin/admin.png",
    "published": "2017-04-10T17:10:21.690Z",
    "type": "general"
  }
```

Дата `published` представляет дату первой публикации и не должна изменяться.

### Стабильный
Файл `sources-dist-stable.json` необходимо отредактировать:

пример:

```json
  "admin": {
    "meta": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/io-package.json",
    "icon": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/admin/admin.png",
    "version": "2.0.7",
    "published": "2017-04-10T17:10:21.690Z",
    "type": "general"
  }
```

Дата `published` представляет дату первой публикации и не должна изменяться.

## Управление версиями адаптера
Текущий номер версии адаптера указан как в io-package.json, так и в package.json.
Две спецификации должны совпадать. Номер версии разделен на три части двумя точками.

```json
"version": "1.7.6"
```

Первая часть (слева направо) представляет `Major Part`, вторая часть представляет `minor` Part, а последняя часть представляет `micro` Part.
Номера версий должны быть увеличены в соответствии со следующим списком:

- **микро** исправлены только ошибки
- **несовершеннолетний** функции были добавлены, но версия совместима с предыдущими версиями
- **Major** Основные изменения, делающие обратную совместимость со старой версией, больше невозможны

Атрибут `news` также должен поддерживаться в io-package.json.
Это позволяет пользователям устанавливать любую версию из списка (при условии, что она была опубликована на npm) через интерфейс администратора.
Номер версии и изменения должны храниться здесь.
Изменения могут быть задокументированы для каждого поддерживаемого языка, по крайней мере, на английском языке.

пример:

```json
"news": {
    "1.7.6": {
        "en": "Configuration dialog was corrected",
        "de": "Konfigurationsdialog wurde korrigiert",
        "ru": "Диалог конфигурации был исправлен",
        "pt": "A caixa de diálogo de configuração foi corrigida",
        "nl": "Configuratiedialoog is gecorrigeerd",
        "fr": "La boîte de dialogue de configuration a été corrigée",
        "it": "La finestra di configurazione è stata corretta",
        "es": "Se corrigió el diálogo de configuración",
        "pl": "Okno dialogowe konfiguracji zostało poprawione"
    },
    "1.7.5": {
        "en": "The roles were tuned",
        "de": "Die Rollen waren abgestimmt",
        "ru": "Роли были настроены",
        "pt": "Os papéis foram afinados",
        "nl": "De rollen zijn afgestemd",
        "fr": "Les rôles ont été réglés",
        "it": "I ruoli erano sintonizzati",
        "es": "Los roles fueron sintonizados",
        "pl": "Role zostały dostrojone"
    }
}
```

## Категории адаптеров
- `сигнализация` - системы безопасности
- «Климат-контроль» - кондиционеры, воздушные фильтры, обогреватели и многое другое
- «связь» - предоставление данных для других адаптеров, например, Б. через ОТДЫХ
- «дата и время» - например, Б. Календарь
- «Энергия» - мониторинг мощности, солнечные системы, инверторы и многое другое.
- «измерение» - другие измерительные системы (например, вода, газ, нефть)
- `сад` - например Б. Газонокосилки, спринклерные системы
- `general` - общие адаптеры, такие как Admin, Web, Discovery
- «геопозиция» - геолокация объектов или людей
- `hardware` - различное многофункциональное оборудование, такое как Arduino, ESP, Bluetooth, ...
- `здоровье` - артериальное давление, сердцебиение, масса тела, ...
- `бытовая` - кухонная техника, пылесосы и др.
- `инфраструктура` - сеть, NAS, принтеры, телефоны
- `iot-systems` - Другие системы умного дома (аппаратное и программное обеспечение)
- `освещение` - освещение
- `логика` - правила, скрипты, парсеры и т. д.
- `Messaging` - адаптер для отправки и получения сообщений, например. Б. по электронной почте, телеграмме, ...
- `misc-data` - экспорт и импорт данных, конвертер валют и т. д.
- «мультимедиа» - ТВ, AVR, боксы, голосовые помощники и т. д.
- `сеть` - пинг, обнаружение сети, UPnP, ...
- «протоколы» - протоколы связи, например, B. MQTT
- «хранилище» - регистрация, хранение данных, например. Б. реляционные базы данных, ...
- `utility` - поддерживающие адаптеры, такие как B. Резервное копирование
- "ТС" - автомобили
- `визуализация` - адаптер визуализации, такой как vis и т. д.
- `visualization-icons` - иконки для визуализаций
- `визуализация-виджеты` - виджеты iobroker.vis
- `погода` - информация о погоде, качество воздуха, информация об окружающей среде

## Тип подключения адаптера
Определить `connectionType` в `common` части `io-package.json` как:

- `local` - обеспечивает прямую связь с устройством или концентратором.
- `cloud` - интеграция этого устройства происходит через облако и требует активного подключения к Интернету.

Определите `dataSource` в `common` как:

- `poll` - Опрос статуса означает, что обновление может быть замечено позже.
- `push` - ioBroker будет уведомлен, как только будет доступен новый статус.
- `допущение` - статус устройства не может быть определен. ioBroker принимает статус на основании последней команды ioBroker.