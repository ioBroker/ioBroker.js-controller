# Инструкции по обновлению js-контроллера

Из-за разного оборудования и платформ, на которых работает ioBroker, js-контроллер должен обновляться вручную. Дальнейшие подробности можно найти в соответствующем разделе.

## Общая информация для всех платформ

**Для обновления с js-controller 1.x до 2.x, пожалуйста, прочитайте информацию https://forum.iobroker.net/topic/25692/js-controller-2-0-ab-sofort-im-latest-repo , которую надо иметь ввиду!**

В любом случае, пожалуйста, сначала обновите slave устройства, а master - в последнюю очередь!

## Linux/macOS (новый установщик)
Это рекомендуемый вариант!

Пожалуйста, выполните следующие команды в SSH оболочке (консоли):
* `iobroker stop`
* `iobroker update`
* `iobroker upgrade self`
* `iobroker start` или перезагрузите сервер, затем ioBroker должен перезагрузиться, и вы можете быть уверены, что все старые процессы завершены.

Если команда обновления отображает Права доступа / Ошибки прав доступа, используйте исправление установки (`curl -sL https://iobroker.net/fix.sh | bash-`), чтобы исправить эти проблемы и обновить команду беги снова.

## Linux/macOS (устанавливается вручную)

Ручная установка обычно выполняется под пользователем root, поэтому перед командами необходимо использовать sudo.

Пожалуйста, выполните следующие команды в SSH оболочке (консоли):
* `cd /opt/iobroker`
* `sudo iobroker stop`
* `sudo iobroker upgrade`
* `sudo iobroker upgrade self`
* `sudo iobroker start` или перезагрузка сервера, затем ioBroker должен перезагрузиться, и вы можете быть уверены, что все старые процессы завершены.

Если команда обновления отображает ошибки разрешений / разрешений, исправьте их. Иногда «sudo» недостаточно, и вы должны запустить установку как настоящий root (выполнить сначала `sudo su -`).

## Windows

Для обновления ioBroker в Windows загрузите соответствующий установщик с нужной версией js-контроллера со страницы загрузки https://www.iobroker.net/#ru/download и выполните обновление с его помощью. С помощью установщика Windows ранее установленные вручную серверы или установки из других операционных систем можно перенести в Windows и обновить.

## Windows (установлена вручную)

Ручная установка выполняется с правами администратора. Запустите окно командной строки cmd.exe от имени администратора (щелкните правой кнопкой мыши на cmd.exe и выполните от имени администратора) и выполните следующие команды:

* `cd C:\iobroker` (или где был установлен ioBroker)
* `iobroker stop`, чтобы остановить службу ioBroker
* `iobroker status`, чтобы проверить, закончил ли ioBroker
* `iobroker update`
* `iobroker upgrade self`
* Запустите службу ioBroker или перезагрузите компьютер, затем ioBroker должен перезагрузиться, и вы можете быть уверены, что все старые процессы были завершены.

## Аварийный Linux / macOS / Windows (ручная переустановка, если после обновления что-то не работает)

В Windows сначала, пожалуйста, вызовите в меню «Пуск» в разделе «ioBroker» командную строку соответствующего экземпляра ioBroker. Правильный каталог устанавливается автоматически. В Linux или macOS перейдите в каталог ioBroker.

Запустите `npm и установите iobroker.js-controller`. Определенную версию можно установить с помощью npm install `iobroker.js-controller@x.y.z` (замените x.y.z на нужную версию).

Если при работе в Linux возникают проблемы с правами доступа, команда должна быть слегка изменена:

* Для систем, созданных с помощью нового установщика Linux: `sudo -u iobroker -H npm install iobroker.js-controller`
* Для систем, установленных вручную под Linux, используйте префикс `sudo` или запуска от имени пользователя root.

Этот способ необходим только в очень немногих случаях и, пожалуйста, проконсультируйтесь на форуме заранее!
